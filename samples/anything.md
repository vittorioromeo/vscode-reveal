# Anything with Reveal.js
				
<small>Created by <a href="http://www.telematique.eu" >Asvin Goel</a></small>

---

The plugin allows to add anything inside an HTML object using an optional JSON string and a javascript function.

--

The plugin uses a user-given function to manipulate all HTML ojects of the given class. Options can be provided as a JSON string within a comment inside the HTML object and default values can be given for all parameters used by the function.

--

## Example setup</h2>

```js {data-trim style="width:100%"}
Reveal.initialize({
  // ...
  anything: [ {
    className: "random", 
    defaults: {min: 0, max: 9}, 
    initialize: (function(container, options){ 
      container.innerHTML = Math.trunc( options.min + Math.random()*(options.max-options.min + 1) ); 
      }) 
    },
  ],
  dependencies: [
    // ...
    { src: 'reveal.js-plugins/anything/anything.js' },				
  ]
});

--

## Example without JSON content

Today's winning 3 digit number is : <span class="rand"></span>, <span class="rand"></span>, <span class="rand"></span>.

Above text can be generated by the code:

```html {data-trim}
<p>
	Today's winning 3 digit number is : 
	<span class="random"></span>, 
	<span class="random"></span>, 
	<span class="random"></span>.
</p>
```

Note, that the default values are used because no JSON string is 
provided.

--

## Example with JSON content

Today's roll of a die is: <span class="rand"><!-- { "min": 1, "max": 6 } --></span>.

Above text can be generated by the code:</p>
```html {data-trim}
<p>
	Today's roll of a die is: 
	<span class="random"><!-- { "min": 1, "max": 6 } --></span>.
</p>
```

Note, that the default values are overwritten by the parameters given in the JSON string.

--

# Animated SVG
				
<div class="animate" data-svg-src="BPMN.svg">
    <svg>
        <circle opacity="0" cx="75" cy="145" r="10" style="stroke-width:2;stroke:#000000" fill="#ff0000">
            <animate class="fragment" data-reverse="reverse0" begin="indefinite" attributeName="opacity" from="0" to="1" dur="0.1s" fill="freeze" repeatCount="1" />     
            <animate id="reverse0" begin="indefinite" attributeName="opacity" to="0" from="1" dur="0.1s" fill="freeze" repeatCount="1" />     

            <animateTransform class="fragment" data-reverse="reverse1" attributeName="transform" begin="indefinite" dur="1.15s" type="translate" from="0 0" to="115 0" fill="freeze" />
            <animateTransform id="reverse1" attributeName="transform" begin="indefinite" dur="0.01s" type="translate" from="115 0" to="0 0" fill="freeze" />

            <animateTransform id="step2" class="fragment" data-reverse="reverse2" attributeName="transform" begin="indefinite" dur="1.35s" type="translate" from="115 0" to="250 0" fill="freeze" />
            <animateTransform id="step2b" attributeName="transform" begin="step2.end" dur="0.8s" type="translate" from="250 0" to="250 -80" fill="freeze" />
            <animateTransform attributeName="transform" begin="step2b.end" dur="1.65s" type="translate" from="250 -80" to="415 -80" fill="freeze" />

            <animateTransform id="reverse2" attributeName="transform" begin="indefinite" dur="0.01s" type="translate" from="415 -80" to="115 0" fill="freeze" />

            <animateTransform id="step3" class="fragment" data-reverse="reverse3" attributeName="transform" begin="indefinite" dur="1.6s" type="translate" from="415 -80" to="575 -80" fill="freeze" />
            <animateTransform id="step3b" attributeName="transform" begin="step3.end" dur="0.8s" type="translate" from="575 -80" to="575 0" fill="freeze" />
            <animateTransform attributeName="transform" begin="step3b.end" dur="0.9s" type="translate" from="575 0" to="665 0" fill="freeze" />

            <animateTransform id="reverse3" attributeName="transform" begin="indefinite" dur="0.01s" type="translate" from="665 0" to="415 -80" fill="freeze" />

            <animate class="fragment" data-reverse="reverse4" begin="indefinite" attributeName="opacity" from="1" to="0" dur="0.1s" fill="freeze" repeatCount="1" />     
            <animate id="reverse4" begin="indefinite" attributeName="opacity" to="1" from="0" dur="0.01s" fill="freeze" repeatCount="1" />     

        </circle>
    </svg>
</div>

--

## Javascript libraries

You can use external javascript libraries e.g. to insert function plots and charts.

---

### Function-plot.js

<div class="plot" id="myplot1" style="background-color:#fff; width:800px; height:400px; margin: 0 auto;">
<!--
{
 "target":"#myplot1",
 "height":400,
 "width":"800",
 "xAxis":{"domain":[-10,10]},
 "yAxis":{"domain":[-5,5]},
 "grid":true,
 "disableZoom": true,
 "data":[{"fn":"sin(x)","color":"darkred"}]
}
-->
</div>

--

<div class="plot" id="myplot2" style="background-color:#fff; width:500px; height:500px; margin: 0 auto;">
<!--
{
  "xAxis": {"domain": ["-10", "10"]},
  "yAxis": {"domain": ["0", "10"]},
  "data": [{ "fn": "10 -x * x/10" }]
}
-->
</div>

---

### Chart.js

<canvas class="chart stretch">
<!--
{
 "type": "line",
 "data": {
  "labels": ["January"," February"," March"," April"," May"," June"," July"],
  "datasets":[
   {
    "data":[" 65"," 59"," 80"," 81"," 56"," 55"," 40"],
    "label":"My first dataset","backgroundColor":"rgba(20,220,220,.8)"
   },
   {
    "data":[" 28"," 48"," 40"," 19"," 86"," 27"," 90"],
    "label":"My second dataset","backgroundColor":"rgba(220,120,120,.8)"
   }
  ]
 }, 
 "options": { "responsive": "true" }
}
-->
				</canvas>

---

### Decision trees with D3.js
<svg class="decisiontree">

<!--
{ 
  "margin": { "left": 100, "right": 250},
  "data": { "name": "0",
    "rule": "null",
    "children": [{
      "name": "2",
      "rule": "sunny",
      "children": [{
        "name": "no(3/100%)",
        "rule": "high"
      }, {
        "name": "yes(2/100%)",
        "rule": "normal"
      }]
    }, {
      "name": "yes(4/100%)",
      "rule": "overcast"
    }, {
      "name": "3",
      "rule": "rainy",
      "children": [{
        "name": "no(2/100%)",
        "rule": "TRUE"
      }, {
        "name": "yes(3/100%)",
        "rule": "FALSE"
      }]
    }]
  }
}
-->
</svg>

---

### Anything with D3.js

<canvas width=500 height=500 class="anything">
<!--
{
  "initialize": "function(container) { 
	var width = container.width,
	    height = container.height;
	var radius = height / 2 - 5,
	    scale = radius,
	    velocity = .02;
	var projection = d3.geo.orthographic()
	    .translate([width / 2, height / 2])
	    .scale(scale)
	    .clipAngle(90);
	var context = container.getContext('2d');
	var path = d3.geo.path()
	    .projection(projection)
	    .context(context);
	d3.json('https://rajgoel.github.io/reveal.js-demos/anything/d3/world-110m.json', function(error, world) {
	  if (error) throw error;
	  var land = topojson.feature(world, world.objects.land);
	  d3.timer(function(elapsed) {
	    context.clearRect(0, 0, width, height);
	    context.beginPath();
	    context.arc(width / 2, height / 2, radius, 0, 2 * Math.PI, true);
	    context.lineWidth = 2.5;
	    context.fillStyle = '#fff';
	    context.fill();
	    projection.rotate([velocity * elapsed, 0]);
	    context.beginPath();
	    path(land);
	    context.fillStyle = '#42affa';
	    context.fill();
	    context.beginPath();
	    context.arc(width / 2, height / 2, radius, 0, 2 * Math.PI, true);
	    context.lineWidth = 2.5;
	    context.strokeStyle = '#ccc';
	    context.stroke();
	  });
	});
	d3.select(self.frameElement).style('height', height + 'px');
    }"
}
-->
</canvas>

				
<p style="font-size:16px">Based on <a href="http://bl.ocks.org/mbostock/ba63c55dd2dbc3ab0127">This is a globe</a> by <a href="http://bost.ocks.org/mike/">Mike Bostock</a>.</p>

---

### World tour

<canvas width=500 height=500 class="anything">
<!--
{
  "initialize": "function(container) { 
	var width = container.width,
	    height = container.height;
	var projection = d3.geo.orthographic()
	    .translate([width / 2, height / 2])
	    .scale(width / 2 - 20)
	    .clipAngle(90)
	    .precision(0.6);
	var c = container.getContext('2d');
	var path = d3.geo.path()
	    .projection(projection)
	    .context(c);
	var title = container.parentElement.querySelector('h3');
	queue()
	    .defer(d3.json, 'https://rajgoel.github.io/reveal.js-demos/anything/d3/world-110m.json')
	    .defer(d3.tsv, 'https://rajgoel.github.io/reveal.js-demos/anything/d3/world-country-names.tsv')
	    .await(ready);
	function ready(error, world, names) {
	  if (error) throw error;
	  var globe = {type: 'Sphere'},
	      land = topojson.feature(world, world.objects.land),
	      countries = topojson.feature(world, world.objects.countries).features,
	      borders = topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }),
	      i = -1,
	      n = countries.length;
	  countries = countries.filter(function(d) {
	    return names.some(function(n) {
	      if (d.id == n.id) return d.name = n.name;
	    });
	  }).sort(function(a, b) {
	    return a.name.localeCompare(b.name);
	  });
	  (function transition() {
	    d3.transition()
	        .duration(1250)
	        .each('start', function() {
			while ( !countries[i = (i + 1) % n] ) {};			
			title.innerHTML = (countries[i].name);
	        })
	        .tween('rotate', function() {
	          var p = d3.geo.centroid(countries[i]),
	              r = d3.interpolate(projection.rotate(), [-p[0], -p[1]]);
	          return function(t) {
	            projection.rotate(r(t));
	            c.clearRect(0, 0, width, height);
	            c.fillStyle = '#fff', c.lineWidth = 2, c.beginPath(), path(globe), c.fill();
	            c.fillStyle = '#42affa', c.beginPath(), path(land), c.fill();
	            c.fillStyle = '#f00', c.beginPath(), path(countries[i]), c.fill();
	            c.strokeStyle = '#ccc', c.lineWidth = .5, c.beginPath(), path(borders), c.stroke();
	            c.strokeStyle = '#ccc', c.lineWidth = 2, c.beginPath(), path(globe), c.stroke();
	          };
	        })
	      .transition()
	        .each('end', transition);
	  })();
	}
	d3.select(self.frameElement).style('height', height + 'px');
    }"
}
-->
</canvas>

<p style="font-size:16px">Based on <a href="http://bl.ocks.org/mbostock/4183330">World Tour</a> by <a href="http://bost.ocks.org/mike/">Mike Bostock</a>.</p>

---

## The end

<p>Check out other plugins by clicking on &nbsp;<a href="#" onclick="RevealMenu.toggle(); return false;"><i class="fa fa-bars"></i></a>&nbsp; and then on "Plugins <i class="fa fa-external-link-alt"></i>".</p>
<p>Have a look at the source code & documentation on <a href="https://github.com/rajgoel/reveal.js-plugins">Github</a>.</p>
